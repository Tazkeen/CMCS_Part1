<Window x:Class="ClaimManagement.ClaimsHistory"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Claims History" Height="450" Width="850">
    <Grid Margin="10">
        <StackPanel Orientation="Vertical">

            <!-- Title -->
            <TextBlock Text="Claims History" 
                       FontSize="20" 
                       FontWeight="Bold" 
                       Margin="0,0,0,10" />

            <!-- DataGrid -->
            <DataGrid x:Name="claimsDataGrid" 
                      AutoGenerateColumns="False" 
                      ItemsSource="{Binding ClaimList}" 
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      RowHeight="35"
                      AlternatingRowBackground="LightGray">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Claim ID" Binding="{Binding ClaimID}" Width="80"/>
                    <DataGridTextColumn Header="First Name" Binding="{Binding FirstName}" Width="120"/>
                    <DataGridTextColumn Header="Surname" Binding="{Binding Surname}" Width="120"/>
                    <DataGridTextColumn Header="Hours Worked" Binding="{Binding HoursWorked}" Width="100"/>
                    <DataGridTextColumn Header="Hourly Rate" Binding="{Binding HourlyRate}" Width="100"/>
                    <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>

                    <!-- ✅ Status Button Column -->
                    <DataGridTemplateColumn Header="Action" Width="120">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Change Status"
                                        Padding="5,2"
                                        Margin="3"
                                        Background="#FF4CAF50"
                                        Foreground="White"
                                        FontWeight="Bold"
                                        Cursor="Hand"
                                        Click="ChangeStatus_Click"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>

                <!-- ✅ Row colors based on Status -->
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Status}" Value="Approved">
                                <Setter Property="Background" Value="LightGreen"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Rejected">
                                <Setter Property="Background" Value="LightCoral"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Pending">
                                <Setter Property="Background" Value="LightYellow"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>
            </DataGrid>

            <!-- Back Button -->
            <Button Content="Back"
                    Width="100"
                    Height="30"
                    Margin="0,10,0,0"
                    HorizontalAlignment="Left"
                    Click="BackButton_Click"/>
        </StackPanel>
    </Grid>
</Window>
